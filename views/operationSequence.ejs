<!DOCTYPE html>


<% tracerules.forEach(function(trace,index){%>
<div class="myBorderRadius">
    <div class="titles">
      Trace Rule
    </div>
    
    <div style="margin-top:8px">
      <ul class="nav nav-list" id="guardlist">
        <li class="nav-list-11"><a href="javascript:;" class="myInsidePlus" style="text-align:left;margin-bottom:0px;vertical-align:middle;font-size:120%" id="guardNameShow">Guard:  <%=trace.name%><i class="icon-plus" style="float:right;margin-right:6px;display:none;margin-top:8px"></i><i class="icon-pencil editGuard" style="float:right;margin-right:6px;display:none;margin-top:8px"></i></a></li>
      </ul>

    </div>
</div>


<div class="myBorderRadius" style="margin-top:15px">
    <div class="ostitles" style="line-height:18px">
      Operation Sequence
    </div>
    
    <div style="margin-top:8px">

      <div id="outer">
        <div class="box">
          

          <div class="accordion_wrapper sortable" rel="sections">

                <% 
                var positions=new Array();
               
                positions=trace.positions.split('$');

                for(key in positions){
                      var element_path=new Array();
                      if(trace.operations[positions[key]].element!="")

                      element_path=trace.operations[positions[key]].element.split('.');
                      
                      if(trace._id==element_path[0]){
                        var element_name=trace.elements[element_path[2]].name;
                        var element_description=trace.elements[element_path[2]].description;
                        var element_type=trace.elements[element_path[2]].type;
                        var element_executor=trace.elements[element_path[2]].executor;
                        var element_is_virtual=trace.elements[element_path[2]].is_virtual;
                        }
                        if(trace.operations[positions[key]].type=="C2"){
                %>

                        <div id="<%=positions[key]%>" class="section_accordion">
                          <div class="accordion">
                            <h4>
                              <%=positions[key]%>
                              <i class="icon-minus" style="float:right;margin-right:6px;display:none"></i><i class="icon-plus" style="float:right;margin-right:6px;display:none"></i>
                            </h4>
                            <div id="accordion_<%= trace.operations[positions[key]].name%>_content" >
                              <form class="form-horizontal">
                                <div class="control-group">
                                  <label class="control-label" for="ActivityName">Name:</label>
                                  <div class="controls">
                                    <input type="text" id="input" readonly="true" style="width:100" placeholder="<%= element_name%>">
                                    <i class="icon-pencil editOperation Activity" style="float:right;margin-right:0px;cursor:pointer"></i>
                                    <i class="icon-ok editOperation Activity" style="float:right;margin-right:0px;cursor:pointer;display:none"></i>
                                  </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="inputEmail">Description:</label>
                                    <div class="controls">
                                      <textarea rows="3" cols="10" readonly="true" style="resize:none"><%=element_description%> </textarea>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="ActivityExecutor">Executor:</label>
                                    <select style="width:15%" class="ActivityExecutor" disabled=true>
                                      <% if(element_executor=="System"){%>
                                      <option value="System" selected="selected">System</option>
                                      <option value="User">User</option>
                                      <%}else{%>
                                        <option value="System">System</option>
                                      <option value="User" selected="selected">User</option>
                                      <%}%>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="ActivityVirtual">Virtual:</label>
                                    <select style="width:10%" class="ActivityVirtual" disabled=true>
                                      <% if(element_is_virtual=="true"){%>
                                      <option value="yes" selected="selected">Yes</option>
                                      <option value="no">No</option>
                                       <%}else{%>
                                        <option value="yes">Yes</option>
                                        <option value="no" selected="selected">No</option>
                                      <%}%>
                                    </select>
                                </div>
                              </form>
                            </div>
                          </div>
                        </div>
              <%
              }//activity type
              else{
                if(trace.operations[positions[key]].type=="C1"){
                  %>

                        <div id="<%=positions[key]%>" class="section_accordion">
                          <div class="accordion">
                            <h4>
                              <%=positions[key]%>
                              <i class="icon-minus" style="float:right;margin-right:6px;display:none"></i><i class="icon-plus" style="float:right;margin-right:6px;display:none"></i>
                            </h4>
                            <div id="accordion_<%= trace.operations[positions[key]].name%>_content" >
                              <form class="form-horizontal">
                                <div class="control-group">
                                  <label class="control-label" for="ActivityName">Name:</label>
                                  <div class="controls">
                                    <input type="text" id="input" readonly="true" style="width:100" placeholder="<%= element_name%>">
                                    <i class="icon-pencil editOperation UseCase" style="float:right;margin-right:0px;cursor:pointer"></i>
                                    <i class="icon-ok editOperation UseCase" style="float:right;margin-right:0px;cursor:pointer;display:none"></i>
                                  </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="inputEmail">Description:</label>
                                    <div class="controls">
                                      <textarea rows="3" cols="10" readonly="true" style="resize:none"><%=element_description%> </textarea>
                                    </div>
                                </div>
                              </form>
                            </div>
                          </div>
                        </div>
                  <%
                }else{
                  if(trace.operations[positions[key]].type=="C3"){
                    %>

                        <div id="<%=positions[key]%>" class="section_accordion">
                          <div class="accordion">
                            <h4>
                              <%=positions[key]%>
                              <i class="icon-minus" style="float:right;margin-right:6px;display:none"></i><i class="icon-plus" style="float:right;margin-right:6px;display:none"></i>
                            </h4>
                            <div id="accordion_<%= trace.operations[positions[key]].name%>_content" >
                              <form class="form-horizontal">
                                <div class="control-group">
                                  <label class="control-label" for="DecisionName">Name:</label>
                                  <div class="controls">
                                    <input type="text" id="input" readonly="true" style="width:100" placeholder="<%= element_name%>">
                                    <i class="icon-pencil editOperation Decision" style="float:right;margin-right:0px;cursor:pointer"></i>
                                    <i class="icon-ok editOperation Decision" style="float:right;margin-right:0px;cursor:pointer;display:none"></i>
                                  </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="inputEmail">Description:</label>
                                    <div class="controls">
                                      <textarea rows="3" cols="10" readonly="true" style="resize:none"><%=element_description%> </textarea>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="DecisionExecutor">Executor:</label>
                                    <select style="width:15%" class="DecisionExecutor" disabled=true>
                                      <% if(element_executor=="System"){%>
                                      <option value="System" selected="selected">System</option>
                                      <option value="User">User</option>
                                      <%}else{%>
                                        <option value="System">System</option>
                                      <option value="User" selected="selected">User</option>
                                      <%}%>
                                    </select>
                                </div>
                              </form>
                            </div>
                          </div>
                        </div>    
                    <%
                  }else{
                    if(trace.operations[positions[key]].type=="C4"){
                      %>
                       <div id="<%=positions[key]%>" class="section_accordion">
                          <div class="accordion">
                            <h4>
                              <%=positions[key]%>
                              <i class="icon-minus" style="float:right;margin-right:6px;display:none"></i><i class="icon-plus" style="float:right;margin-right:6px;display:none"></i>
                            </h4>
                            <div id="accordion_<%= trace.operations[positions[key]].name%>_content" >
                              <form class="form-horizontal">
                                <div class="control-group">
                                  <label class="control-label" for="ConditionName">Name:</label>
                                  <div class="controls">
                                    <input type="text" id="input" readonly="true" style="width:100" placeholder="<%= element_name%>">
                                    <i class="icon-pencil editOperation Condition" style="float:right;margin-right:0px;cursor:pointer"></i>
                                    <i class="icon-ok editOperation Condition" style="float:right;margin-right:0px;cursor:pointer;display:none"></i>
                                  </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="ConditionDescription">Description:</label>
                                    <div class="controls">
                                      <textarea rows="3" cols="10" readonly="true" style="resize:none"><%=element_description%> </textarea>
                                    </div>
                                </div>
                              </form>
                            </div>
                          </div>
                        </div>
                      <%
                    }
                  }
                }
              }  
            }
            
            %>
            
          </div>
        </div>
      </div>

    </div>
   </div>
  <%})%>